my_type=hypothesis
proj=cassandra
u_test=secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
h_list[1]=phi_convict_threshold@@@CassandraDaemon@@@1@@@7@@@5.0
proj: cassandra
u_test: secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
h_list: phi_convict_threshold@@@CassandraDaemon@@@1@@@7@@@5.0
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 28.11 seconds ===========================
[msx] rc = 0
v1v2 running time = 49975889779
---> v1v2 test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 24.11 seconds ===========================
[msx] rc = 0
v1v1 running time = 45818706058
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 31.98 seconds ===========================
[msx] rc = 0
v2v2 running time = 53721048400
---> v1v1 and v2v2 test test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 35.95 seconds ===========================
[msx] rc = 0
v1v2 running time = 57730913775
---> v1v2 test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 36.53 seconds ===========================
[msx] rc = 0
v1v1 running time = 58202446230
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column 
-------------------------------- live log call ---------------------------------
05:01:53,606 cassandra.cluster WARNING Host 127.0.0.1:9042 has been marked down
PASSED                                                                   [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column failed (1 runs remaining out of 2).
	<class 'cassandra.OperationTimedOut'>
	errors={'127.0.0.1:9042': 'Client request timeout. See Session.execute[_async](timeout)'}, last_host=127.0.0.1:9042
	[<TracebackEntry /root/cassandra-dtest/secondary_indexes_test.py:950>, <TracebackEntry cassandra/cluster.py:2618>, <TracebackEntry cassandra/cluster.py:4894>]
test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 64.44 seconds ===========================
[msx] rc = 0
v2v2 running time = 86293349813
---> v1v1 and v2v2 test test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 22.32 seconds ===========================
[msx] rc = 0
v1v2 running time = 43915194254
---> v1v2 test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 28.75 seconds ===========================
[msx] rc = 0
v1v1 running time = 50510862026
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 29.30 seconds ===========================
[msx] rc = 0
v2v2 running time = 50848123696
---> v1v1 and v2v2 test test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 28.54 seconds ===========================
[msx] rc = 0
v1v2 running time = 50297229662
---> v1v2 test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 32.04 seconds ===========================
[msx] rc = 0
v1v1 running time = 53803320886
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column FAILED [100%]

=================================== FAILURES ===================================
_ TestSecondaryIndexesOnCollections.test_multiple_indexes_on_single_map_column _

self = <secondary_indexes_test.TestSecondaryIndexesOnCollections object at 0x7f30c2057ac8>

    @since('3.0')
    def test_multiple_indexes_on_single_map_column(self):
        """
            verifying functionality of multiple unique secondary indexes on a single column
            @jira_ticket CASSANDRA-7771
            @since 3.0
            """
        cluster = self.cluster
        cluster.populate(1).start()
        [node1] = cluster.nodelist()
        session = self.patient_cql_connection(node1)
        create_ks(session, 'map_double_index', 1)
        session.execute("""
                    CREATE TABLE map_tbl (
                        id uuid primary key,
                        amap map<text, int>
                    )
                """)
        session.execute("CREATE INDEX map_keys ON map_tbl(keys(amap))")
        session.execute("CREATE INDEX map_values ON map_tbl(amap)")
        session.execute("CREATE INDEX map_entries ON map_tbl(entries(amap))")
    
        # multiple indexes on a single column are allowed but identical duplicate indexes are not
        assert_invalid(session,
                       "CREATE INDEX map_values_2 ON map_tbl(amap)",
                       'Index map_values_2 is a duplicate of existing index map_values')
    
        session.execute("INSERT INTO map_tbl (id, amap) values (uuid(), {'foo': 1, 'bar': 2});")
        session.execute("INSERT INTO map_tbl (id, amap) values (uuid(), {'faz': 1, 'baz': 2});")
    
        value_search = list(session.execute("SELECT * FROM map_tbl WHERE amap CONTAINS 1"))
        assert 2 == len(value_search), "incorrect number of rows when querying on map values"
    
        key_search = list(session.execute("SELECT * FROM map_tbl WHERE amap CONTAINS KEY 'foo'"))
        assert 1 == len(key_search), "incorrect number of rows when querying on map keys"
    
        entries_search = list(session.execute("SELECT * FROM map_tbl WHERE amap['foo'] = 1"))
        assert 1 == len(entries_search), "incorrect number of rows when querying on map entries"
    
        session.cluster.refresh_schema_metadata()
        table_meta = session.cluster.metadata.keyspaces["map_double_index"].tables["map_tbl"]
        assert 3 == len(table_meta.indexes)
        assert {'map_keys', 'map_values', 'map_entries'} == set(table_meta.indexes.keys())
        assert 3 == len(session.cluster.metadata.keyspaces["map_double_index"].indexes)
    
        assert 'map_keys' in table_meta.export_as_string()
        assert 'map_values' in table_meta.export_as_string()
        assert 'map_entries' in table_meta.export_as_string()
    
>       session.execute("DROP TABLE map_tbl")

secondary_indexes_test.py:950: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
cassandra/cluster.py:2618: in cassandra.cluster.Session.execute
    ???
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

>   ???
E   cassandra.OperationTimedOut: errors={'127.0.0.1:9042': 'Client request timeout. See Session.execute[_async](timeout)'}, last_host=127.0.0.1:9042

cassandra/cluster.py:4894: OperationTimedOut
---------------------------- Captured stdout setup -----------------------------
05:06:52,704 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
05:06:51,552 conftest INFO Starting execution of test_multiple_indexes_on_single_map_column at 2022-02-02 05:06:51.552122
05:06:52,608 dtest_setup INFO cluster ccm directory: /tmp/dtest-94iavo6e
----------------------------- Captured stdout call -----------------------------
05:06:52,706 ccm DEBUG using balanced tokens for non-vnode cluster
05:06:53,333 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-94iavo6e/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-94iavo6e/test/node1/conf'}
05:06:53,333 ccm INFO node1: using Java 8 for the current invocation
05:06:53,515 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-94iavo6e/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-94iavo6e/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=2'}
05:06:53,516 ccm INFO node1: using Java 8 for the current invocation
05:06:53,595 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
------------------------------ Captured log call -------------------------------
05:06:53,333 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-94iavo6e/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-94iavo6e/test/node1/conf'}
05:06:53,333 ccm INFO node1: using Java 8 for the current invocation
05:06:53,515 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-94iavo6e/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-94iavo6e/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=2'}
05:06:53,516 ccm INFO node1: using Java 8 for the current invocation
05:06:53,595 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
--------------------------- Captured stdout teardown ---------------------------
05:07:25,81 ccm DEBUG Log-watching thread exiting.
---------------------------- Captured stdout setup -----------------------------
05:07:29,600 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
05:07:28,482 conftest INFO Starting execution of test_multiple_indexes_on_single_map_column at 2022-02-02 05:07:28.482677
05:07:29,493 dtest_setup INFO cluster ccm directory: /tmp/dtest-hxqv8iwa
----------------------------- Captured stdout call -----------------------------

05:07:29,602 ccm DEBUG using balanced tokens for non-vnode cluster
05:07:30,332 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-hxqv8iwa/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-hxqv8iwa/test/node1/conf'}
05:07:30,333 ccm INFO node1: using Java 8 for the current invocation
05:07:30,509 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-hxqv8iwa/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-hxqv8iwa/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=2'}
05:07:30,510 ccm INFO node1: using Java 8 for the current invocation
05:07:30,599 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
------------------------------ Captured log call -------------------------------
05:07:30,332 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-hxqv8iwa/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-hxqv8iwa/test/node1/conf'}
05:07:30,333 ccm INFO node1: using Java 8 for the current invocation
05:07:30,509 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-hxqv8iwa/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-hxqv8iwa/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=2'}
05:07:30,510 ccm INFO node1: using Java 8 for the current invocation
05:07:30,599 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
--------------------------- Captured stdout teardown ---------------------------
05:07:25,81 ccm DEBUG Log-watching thread exiting.
--------------------------- Captured stdout teardown ---------------------------
05:07:25,81 ccm DEBUG Log-watching thread exiting.
--------------------------- Captured stdout teardown ---------------------------
05:08:01,698 ccm DEBUG Log-watching thread exiting.
===Flaky Test Report===

test_multiple_indexes_on_single_map_column failed (1 runs remaining out of 2).
	<class 'cassandra.OperationTimedOut'>
	errors={'127.0.0.1:9042': 'Client request timeout. See Session.execute[_async](timeout)'}, last_host=127.0.0.1:9042
	[<TracebackEntry /root/cassandra-dtest/secondary_indexes_test.py:950>, <TracebackEntry cassandra/cluster.py:2618>, <TracebackEntry cassandra/cluster.py:4894>]
test_multiple_indexes_on_single_map_column failed; it passed 0 out of the required 1 times.
	<class 'cassandra.OperationTimedOut'>
	errors={'127.0.0.1:9042': 'Client request timeout. See Session.execute[_async](timeout)'}, last_host=127.0.0.1:9042
	[<TracebackEntry /root/cassandra-dtest/secondary_indexes_test.py:950>, <TracebackEntry cassandra/cluster.py:2618>, <TracebackEntry cassandra/cluster.py:4894>]

===End Flaky Test Report===
========================== 1 failed in 70.72 seconds ===========================
[msx] rc = 1
v2v2 running time = 92456571262
---> v1v1 or v2v2 test failed.
v2v2 failed in a hypo test
proj: cassandra
u_test: secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
h_list: phi_convict_threshold@@@CassandraDaemon@@@1@@@7@@@5.0
vv_mode: v2v2
result: FAIL
failureMessage: 
stackTrace: 

cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 32.43 seconds ===========================
[msx] rc = 0
v1v2 running time = 54196220298
---> v1v2 test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column failed (1 runs remaining out of 2).
	<class 'cassandra.OperationTimedOut'>
	errors={'127.0.0.1:9042': 'Client request timeout. See Session.execute[_async](timeout)'}, last_host=127.0.0.1:9042
	[<TracebackEntry /root/cassandra-dtest/secondary_indexes_test.py:950>, <TracebackEntry cassandra/cluster.py:2618>, <TracebackEntry cassandra/cluster.py:4894>]
test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 70.81 seconds ===========================
[msx] rc = 0
v1v1 running time = 92530819977
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 31.33 seconds ===========================
[msx] rc = 0
v2v2 running time = 53157654414
---> v1v1 and v2v2 test test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column 
-------------------------------- live log call ---------------------------------
05:12:21,196 cassandra.cluster WARNING Host 127.0.0.1:9042 has been marked down
05:12:22,303 cassandra.pool WARNING Error attempting to reconnect to 127.0.0.1:9042, scheduling retry in 1.92 seconds: [Errno 111] Tried connecting to [('127.0.0.1', 9042)]. Last error: Connection refused
PASSED                                                                   [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column failed (1 runs remaining out of 2).
	<class 'cassandra.OperationTimedOut'>
	errors={'127.0.0.1:9042': 'Client request timeout. See Session.execute[_async](timeout)'}, last_host=127.0.0.1:9042
	[<TracebackEntry /root/cassandra-dtest/secondary_indexes_test.py:950>, <TracebackEntry cassandra/cluster.py:2618>, <TracebackEntry cassandra/cluster.py:4894>]
test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 72.90 seconds ===========================
[msx] rc = 0
v1v2 running time = 94649272562
---> v1v2 test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column FAILED [100%]

=================================== FAILURES ===================================
_ TestSecondaryIndexesOnCollections.test_multiple_indexes_on_single_map_column _

self = <secondary_indexes_test.TestSecondaryIndexesOnCollections object at 0x7fa3fdb49b38>

    @since('3.0')
    def test_multiple_indexes_on_single_map_column(self):
        """
            verifying functionality of multiple unique secondary indexes on a single column
            @jira_ticket CASSANDRA-7771
            @since 3.0
            """
        cluster = self.cluster
        cluster.populate(1).start()
        [node1] = cluster.nodelist()
        session = self.patient_cql_connection(node1)
        create_ks(session, 'map_double_index', 1)
        session.execute("""
                    CREATE TABLE map_tbl (
                        id uuid primary key,
                        amap map<text, int>
                    )
                """)
        session.execute("CREATE INDEX map_keys ON map_tbl(keys(amap))")
        session.execute("CREATE INDEX map_values ON map_tbl(amap)")
        session.execute("CREATE INDEX map_entries ON map_tbl(entries(amap))")
    
        # multiple indexes on a single column are allowed but identical duplicate indexes are not
        assert_invalid(session,
                       "CREATE INDEX map_values_2 ON map_tbl(amap)",
                       'Index map_values_2 is a duplicate of existing index map_values')
    
        session.execute("INSERT INTO map_tbl (id, amap) values (uuid(), {'foo': 1, 'bar': 2});")
        session.execute("INSERT INTO map_tbl (id, amap) values (uuid(), {'faz': 1, 'baz': 2});")
    
        value_search = list(session.execute("SELECT * FROM map_tbl WHERE amap CONTAINS 1"))
        assert 2 == len(value_search), "incorrect number of rows when querying on map values"
    
        key_search = list(session.execute("SELECT * FROM map_tbl WHERE amap CONTAINS KEY 'foo'"))
        assert 1 == len(key_search), "incorrect number of rows when querying on map keys"
    
        entries_search = list(session.execute("SELECT * FROM map_tbl WHERE amap['foo'] = 1"))
        assert 1 == len(entries_search), "incorrect number of rows when querying on map entries"
    
        session.cluster.refresh_schema_metadata()
        table_meta = session.cluster.metadata.keyspaces["map_double_index"].tables["map_tbl"]
        assert 3 == len(table_meta.indexes)
        assert {'map_keys', 'map_values', 'map_entries'} == set(table_meta.indexes.keys())
        assert 3 == len(session.cluster.metadata.keyspaces["map_double_index"].indexes)
    
        assert 'map_keys' in table_meta.export_as_string()
        assert 'map_values' in table_meta.export_as_string()
        assert 'map_entries' in table_meta.export_as_string()
    
>       session.execute("DROP TABLE map_tbl")

secondary_indexes_test.py:950: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
cassandra/cluster.py:2618: in cassandra.cluster.Session.execute
    ???
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

>   ???
E   cassandra.OperationTimedOut: errors={'127.0.0.1:9042': 'Client request timeout. See Session.execute[_async](timeout)'}, last_host=127.0.0.1:9042

cassandra/cluster.py:4894: OperationTimedOut
---------------------------- Captured stdout setup -----------------------------
05:13:19,651 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
05:13:18,626 conftest INFO Starting execution of test_multiple_indexes_on_single_map_column at 2022-02-02 05:13:18.626100
05:13:19,532 dtest_setup INFO cluster ccm directory: /tmp/dtest-ydhg60x_
----------------------------- Captured stdout call -----------------------------
05:13:19,661 ccm DEBUG using balanced tokens for non-vnode cluster
05:13:20,285 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-ydhg60x_/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-ydhg60x_/test/node1/conf'}
05:13:20,285 ccm INFO node1: using Java 8 for the current invocation
05:13:20,444 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-ydhg60x_/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-ydhg60x_/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=2'}
05:13:20,445 ccm INFO node1: using Java 8 for the current invocation
05:13:20,542 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
------------------------------ Captured log call -------------------------------
05:13:20,285 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-ydhg60x_/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-ydhg60x_/test/node1/conf'}
05:13:20,285 ccm INFO node1: using Java 8 for the current invocation
05:13:20,444 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-ydhg60x_/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-ydhg60x_/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=2'}
05:13:20,445 ccm INFO node1: using Java 8 for the current invocation
05:13:20,542 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
--------------------------- Captured stdout teardown ---------------------------
05:13:56,268 ccm DEBUG Log-watching thread exiting.
---------------------------- Captured stdout setup -----------------------------
05:14:00,409 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
05:13:59,447 conftest INFO Starting execution of test_multiple_indexes_on_single_map_column at 2022-02-02 05:13:59.447279
05:14:00,309 dtest_setup INFO cluster ccm directory: /tmp/dtest-h8vhhnxd
----------------------------- Captured stdout call -----------------------------
05:14:00,412 ccm DEBUG using balanced tokens for non-vnode cluster
05:14:01,15 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-h8vhhnxd/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-h8vhhnxd/test/node1/conf'}
05:14:01,17 ccm INFO node1: using Java 8 for the current invocation
05:14:01,174 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-h8vhhnxd/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-h8vhhnxd/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=2'}
05:14:01,175 ccm INFO node1: using Java 8 for the current invocation
05:14:01,261 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
------------------------------ Captured log call -------------------------------
05:14:01,15 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-h8vhhnxd/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-h8vhhnxd/test/node1/conf'}
05:14:01,17 ccm INFO node1: using Java 8 for the current invocation
05:14:01,174 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '43705889f285', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'secondary_indexes_test.py::TestSecondaryIndexesOnCollections::()::test_multiple_indexes_on_single_map_column (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-h8vhhnxd/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-h8vhhnxd/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=2'}
05:14:01,175 ccm INFO node1: using Java 8 for the current invocation
05:14:01,261 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
--------------------------- Captured stdout teardown ---------------------------
05:13:56,268 ccm DEBUG Log-watching thread exiting.
--------------------------- Captured stdout teardown ---------------------------
05:13:56,268 ccm DEBUG Log-watching thread exiting.
--------------------------- Captured stdout teardown ---------------------------
05:14:39,532 ccm DEBUG Log-watching thread exiting.
===Flaky Test Report===

test_multiple_indexes_on_single_map_column failed (1 runs remaining out of 2).
	<class 'cassandra.OperationTimedOut'>
	errors={'127.0.0.1:9042': 'Client request timeout. See Session.execute[_async](timeout)'}, last_host=127.0.0.1:9042
	[<TracebackEntry /root/cassandra-dtest/secondary_indexes_test.py:950>, <TracebackEntry cassandra/cluster.py:2618>, <TracebackEntry cassandra/cluster.py:4894>]
test_multiple_indexes_on_single_map_column failed; it passed 0 out of the required 1 times.
	<class 'cassandra.OperationTimedOut'>
	errors={'127.0.0.1:9042': 'Client request timeout. See Session.execute[_async](timeout)'}, last_host=127.0.0.1:9042
	[<TracebackEntry /root/cassandra-dtest/secondary_indexes_test.py:950>, <TracebackEntry cassandra/cluster.py:2618>, <TracebackEntry cassandra/cluster.py:4894>]

===End Flaky Test Report===
========================== 1 failed in 83.52 seconds ===========================
[msx] rc = 1
v1v1 running time = 105269579285
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 27.90 seconds ===========================
[msx] rc = 0
v2v2 running time = 49670550199
---> v1v1 or v2v2 test failed.
v1v1 failed in a hypo test
proj: cassandra
u_test: secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
h_list: phi_convict_threshold@@@CassandraDaemon@@@1@@@7@@@5.0
vv_mode: v1v1
result: FAIL
failureMessage: 
stackTrace: 

cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 33.71 seconds ===========================
[msx] rc = 0
v1v2 running time = 55433555494
---> v1v2 test suceeded.
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 29.43 seconds ===========================
[msx] rc = 0
v1v1 running time = 51135010014
cassandra secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

secondary_indexes_test.py::TestSecondaryIndexesOnCollections::test_multiple_indexes_on_single_map_column PASSED [100%]
===Flaky Test Report===

test_multiple_indexes_on_single_map_column passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 32.97 seconds ===========================
[msx] rc = 0
v2v2 running time = 54657695980
---> v1v1 and v2v2 test test suceeded.
early stop after 7 is satisfied
v1v2 failed with probability 0 out of 7
v1v1v2v2 failed with probability 2 out of 7
Total execution time in seconds : 1304
0
