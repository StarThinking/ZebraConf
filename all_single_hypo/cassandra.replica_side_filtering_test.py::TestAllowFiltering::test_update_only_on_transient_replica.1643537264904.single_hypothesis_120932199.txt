my_type=hypothesis
proj=cassandra
u_test=replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
h_list[1]=internode_application_receive_queue_reserve_endpoint_capacity_in_bytes@@@CassandraDaemon@@@-1@@@4096@@@134217728
proj: cassandra
u_test: replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
h_list: internode_application_receive_queue_reserve_endpoint_capacity_in_bytes@@@CassandraDaemon@@@-1@@@4096@@@134217728
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:15:45,742 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:15:42,609 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-ec1d46bb unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica ERROR [100%]

==================================== ERRORS ====================================
_ ERROR at teardown of TestAllowFiltering.test_update_only_on_transient_replica _
Unexpected error found in node logs (see stdout for full details). Errors: [ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:15:42,609 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-ec1d46bb unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-7] 2022-01-30 10:15:45,044 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-236bd2ed unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:15:42,609 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-ec1d46bb unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)]
---------------------------- Captured stdout setup -----------------------------
10:15:15,561 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
10:15:14,474 conftest INFO Starting execution of test_update_only_on_transient_replica at 2022-01-30 10:15:14.474821
10:15:15,482 dtest_setup INFO cluster ccm directory: /tmp/dtest-f6m80nqc
----------------------------- Captured stdout call -----------------------------

10:15:16,836 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-f6m80nqc/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-f6m80nqc/test/node1/conf'}
10:15:16,837 ccm INFO node1: using Java 8 for the current invocation
10:15:17,5 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-f6m80nqc/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-f6m80nqc/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:15:17,6 ccm INFO node1: using Java 8 for the current invocation
10:15:17,90 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:15:17,359 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-f6m80nqc/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-f6m80nqc/test/node2/conf'}
10:15:17,360 ccm INFO node2: using Java 8 for the current invocation
10:15:17,517 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-f6m80nqc/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-f6m80nqc/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:15:17,518 ccm INFO node2: using Java 8 for the current invocation
10:15:17,605 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
install rule disable mutations

----------------------------- Captured stderr call -----------------------------
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 193, in run
    self.scan_and_report()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 186, in scan_and_report
    on_error_call(errordata)
  File "/root/cassandra-dtest/dtest_setup.py", line 136, in _log_error_handler
    pytest.fail("Error details: \n{message}".format(message=message))
  File "/root/dtest/lib/python3.6/site-packages/_pytest/outcomes.py", line 97, in fail
    raise Failed(msg=msg, pytrace=pytrace)
Failed: Error details: 
Errors seen in logs for: node2
node2: ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:15:42,609 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-ec1d46bb unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

------------------------------ Captured log call -------------------------------
10:15:16,836 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-f6m80nqc/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-f6m80nqc/test/node1/conf'}
10:15:16,837 ccm INFO node1: using Java 8 for the current invocation
10:15:17,5 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-f6m80nqc/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-f6m80nqc/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:15:17,6 ccm INFO node1: using Java 8 for the current invocation
10:15:17,90 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:15:17,359 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-f6m80nqc/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-f6m80nqc/test/node2/conf'}
10:15:17,360 ccm INFO node2: using Java 8 for the current invocation
10:15:17,517 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-f6m80nqc/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-f6m80nqc/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:15:17,518 ccm INFO node2: using Java 8 for the current invocation
10:15:17,605 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:15:41,857 cassandra.cluster INFO New Cassandra host <Host: 127.0.0.2:9042 datacenter1> discovered
---------------------------- Captured log teardown -----------------------------
10:15:45,742 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:15:42,609 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-ec1d46bb unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===
====================== 1 passed, 1 error in 32.46 seconds ======================
[msx] rc = 1
v1v2 running time = 53905050383
---> v1v2 test failed.
proj: cassandra
u_test: replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
h_list: internode_application_receive_queue_reserve_endpoint_capacity_in_bytes@@@CassandraDaemon@@@-1@@@4096@@@134217728
vv_mode: v1v2
result: FAIL
failureMessage: 
stackTrace: 

cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:16:40,119 conftest ERROR Unexpected error in node1 log, error: 
ERROR [MigrationStage:1] 2022-01-30 10:16:39,391 CassandraDaemon.java:581 - Exception in thread Thread[MigrationStage:1,5,main]
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.OutboundConnection.enqueue(OutboundConnection.java:328)
	at org.apache.cassandra.net.OutboundConnections.enqueue(OutboundConnections.java:84)
	at org.apache.cassandra.net.MessagingService.doSend(MessagingService.java:338)
	at org.apache.cassandra.net.OutboundSink.accept(OutboundSink.java:70)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:327)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:314)
	at org.apache.cassandra.schema.SchemaPullVerbHandler.doVerb(SchemaPullVerbHandler.java:45)
	at org.apache.cassandra.net.InboundSink.lambda$new$0(InboundSink.java:78)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:97)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:45)
	at org.apache.cassandra.net.InboundMessageHandler$ProcessMessage.run(InboundMessageHandler.java:432)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 32.99 seconds ===========================
[msx] rc = 0
v1v1 running time = 54343983062
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 32.23 seconds ===========================
[msx] rc = 0
v2v2 running time = 53835821733
---> v1v1 and v2v2 test test suceeded.
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:18:31,245 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:18:18,418 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-10a7cf3c unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10665 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica ERROR [100%]

==================================== ERRORS ====================================
_ ERROR at teardown of TestAllowFiltering.test_update_only_on_transient_replica _
Unexpected error found in node logs (see stdout for full details). Errors: [ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:18:18,418 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-10a7cf3c unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10665 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-6] 2022-01-30 10:18:28,607 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-bf0dac6c unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-8] 2022-01-30 10:18:30,607 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-1f19d29a unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:18:18,418 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-10a7cf3c unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10665 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)]
---------------------------- Captured stdout setup -----------------------------
10:17:57,389 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
10:17:56,479 conftest INFO Starting execution of test_update_only_on_transient_replica at 2022-01-30 10:17:56.479325
10:17:57,287 dtest_setup INFO cluster ccm directory: /tmp/dtest-oxbpz_21
----------------------------- Captured stdout call -----------------------------

10:17:58,460 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-oxbpz_21/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-oxbpz_21/test/node1/conf'}
10:17:58,460 ccm INFO node1: using Java 8 for the current invocation
10:17:58,616 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-oxbpz_21/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-oxbpz_21/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:17:58,616 ccm INFO node1: using Java 8 for the current invocation
10:17:58,701 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:17:58,961 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-oxbpz_21/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-oxbpz_21/test/node2/conf'}
10:17:58,962 ccm INFO node2: using Java 8 for the current invocation
10:17:59,119 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-oxbpz_21/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-oxbpz_21/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:17:59,120 ccm INFO node2: using Java 8 for the current invocation
10:17:59,200 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
install rule disable mutations

----------------------------- Captured stderr call -----------------------------
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 193, in run
    self.scan_and_report()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 186, in scan_and_report
    on_error_call(errordata)
  File "/root/cassandra-dtest/dtest_setup.py", line 136, in _log_error_handler
    pytest.fail("Error details: \n{message}".format(message=message))
  File "/root/dtest/lib/python3.6/site-packages/_pytest/outcomes.py", line 97, in fail
    raise Failed(msg=msg, pytrace=pytrace)
Failed: Error details: 
Errors seen in logs for: node2
node2: ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:18:18,418 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-10a7cf3c unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10665 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

------------------------------ Captured log call -------------------------------
10:17:58,460 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-oxbpz_21/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-oxbpz_21/test/node1/conf'}
10:17:58,460 ccm INFO node1: using Java 8 for the current invocation
10:17:58,616 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-oxbpz_21/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-oxbpz_21/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:17:58,616 ccm INFO node1: using Java 8 for the current invocation
10:17:58,701 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:17:58,961 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-oxbpz_21/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-oxbpz_21/test/node2/conf'}
10:17:58,962 ccm INFO node2: using Java 8 for the current invocation
10:17:59,119 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-oxbpz_21/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-oxbpz_21/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:17:59,120 ccm INFO node2: using Java 8 for the current invocation
10:17:59,200 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:18:27,962 cassandra.cluster INFO New Cassandra host <Host: 127.0.0.2:9042 datacenter1> discovered
---------------------------- Captured log teardown -----------------------------
10:18:31,245 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:18:18,418 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-10a7cf3c unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10665 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===
====================== 1 passed, 1 error in 35.93 seconds ======================
[msx] rc = 1
v1v2 running time = 57277322297
---> v1v2 test failed.
proj: cassandra
u_test: replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
h_list: internode_application_receive_queue_reserve_endpoint_capacity_in_bytes@@@CassandraDaemon@@@-1@@@4096@@@134217728
vv_mode: v1v2
result: FAIL
failureMessage: 
stackTrace: 

cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:19:29,219 conftest ERROR Unexpected error in node1 log, error: 
ERROR [MigrationStage:1] 2022-01-30 10:19:28,125 CassandraDaemon.java:581 - Exception in thread Thread[MigrationStage:1,5,main]
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.OutboundConnection.enqueue(OutboundConnection.java:328)
	at org.apache.cassandra.net.OutboundConnections.enqueue(OutboundConnections.java:84)
	at org.apache.cassandra.net.MessagingService.doSend(MessagingService.java:338)
	at org.apache.cassandra.net.OutboundSink.accept(OutboundSink.java:70)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:327)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:314)
	at org.apache.cassandra.schema.SchemaPullVerbHandler.doVerb(SchemaPullVerbHandler.java:45)
	at org.apache.cassandra.net.InboundSink.lambda$new$0(InboundSink.java:78)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:97)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:45)
	at org.apache.cassandra.net.InboundMessageHandler$ProcessMessage.run(InboundMessageHandler.java:432)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 36.54 seconds ===========================
[msx] rc = 0
v1v1 running time = 57962387914
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 32.75 seconds ===========================
[msx] rc = 0
v2v2 running time = 54123051768
---> v1v1 and v2v2 test test suceeded.
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:21:20,599 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:21:19,724 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-f4d44af7 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica ERROR [100%]

==================================== ERRORS ====================================
_ ERROR at teardown of TestAllowFiltering.test_update_only_on_transient_replica _
Unexpected error found in node logs (see stdout for full details). Errors: [ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:21:19,724 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-f4d44af7 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:21:19,724 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-f4d44af7 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)]
---------------------------- Captured stdout setup -----------------------------
10:20:46,980 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
10:20:45,912 conftest INFO Starting execution of test_update_only_on_transient_replica at 2022-01-30 10:20:45.912832
10:20:46,871 dtest_setup INFO cluster ccm directory: /tmp/dtest-wakxsvki
----------------------------- Captured stdout call -----------------------------

10:20:48,323 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wakxsvki/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wakxsvki/test/node1/conf'}
10:20:48,324 ccm INFO node1: using Java 8 for the current invocation
10:20:48,662 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wakxsvki/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wakxsvki/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:20:48,663 ccm INFO node1: using Java 8 for the current invocation
10:20:48,812 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:20:49,311 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wakxsvki/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wakxsvki/test/node2/conf'}
10:20:49,311 ccm INFO node2: using Java 8 for the current invocation
10:20:49,611 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wakxsvki/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wakxsvki/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:20:49,612 ccm INFO node2: using Java 8 for the current invocation
10:20:49,775 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
install rule disable mutations

----------------------------- Captured stderr call -----------------------------
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 193, in run
    self.scan_and_report()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 186, in scan_and_report
    on_error_call(errordata)
  File "/root/cassandra-dtest/dtest_setup.py", line 136, in _log_error_handler
    pytest.fail("Error details: \n{message}".format(message=message))
  File "/root/dtest/lib/python3.6/site-packages/_pytest/outcomes.py", line 97, in fail
    raise Failed(msg=msg, pytrace=pytrace)
Failed: Error details: 
Errors seen in logs for: node2
node2: ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:21:19,724 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-f4d44af7 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

------------------------------ Captured log call -------------------------------
10:20:48,323 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wakxsvki/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wakxsvki/test/node1/conf'}
10:20:48,324 ccm INFO node1: using Java 8 for the current invocation
10:20:48,662 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wakxsvki/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wakxsvki/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:20:48,663 ccm INFO node1: using Java 8 for the current invocation
10:20:48,812 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:20:49,311 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wakxsvki/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wakxsvki/test/node2/conf'}
10:20:49,311 ccm INFO node2: using Java 8 for the current invocation
10:20:49,611 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wakxsvki/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wakxsvki/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:20:49,612 ccm INFO node2: using Java 8 for the current invocation
10:20:49,775 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:21:14,650 cassandra.cluster INFO New Cassandra host <Host: 127.0.0.2:9042 datacenter1> discovered
---------------------------- Captured log teardown -----------------------------
10:21:20,599 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:21:19,724 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-f4d44af7 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===
====================== 1 passed, 1 error in 35.85 seconds ======================
[msx] rc = 1
v1v2 running time = 57243008918
---> v1v2 test failed.
proj: cassandra
u_test: replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
h_list: internode_application_receive_queue_reserve_endpoint_capacity_in_bytes@@@CassandraDaemon@@@-1@@@4096@@@134217728
vv_mode: v1v2
result: FAIL
failureMessage: 
stackTrace: 

cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:22:15,904 conftest ERROR Unexpected error in node1 log, error: 
ERROR [MigrationStage:1] 2022-01-30 10:22:11,601 CassandraDaemon.java:581 - Exception in thread Thread[MigrationStage:1,5,main]
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.OutboundConnection.enqueue(OutboundConnection.java:328)
	at org.apache.cassandra.net.OutboundConnections.enqueue(OutboundConnections.java:84)
	at org.apache.cassandra.net.MessagingService.doSend(MessagingService.java:338)
	at org.apache.cassandra.net.OutboundSink.accept(OutboundSink.java:70)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:327)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:314)
	at org.apache.cassandra.schema.SchemaPullVerbHandler.doVerb(SchemaPullVerbHandler.java:45)
	at org.apache.cassandra.net.InboundSink.lambda$new$0(InboundSink.java:78)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:97)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:45)
	at org.apache.cassandra.net.InboundMessageHandler$ProcessMessage.run(InboundMessageHandler.java:432)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 33.90 seconds ===========================
[msx] rc = 0
v1v1 running time = 55269760039
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 33.22 seconds ===========================
[msx] rc = 0
v2v2 running time = 54642910444
---> v1v1 and v2v2 test test suceeded.
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:24:07,19 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:24:03,193 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-89e40c94 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica ERROR [100%]

==================================== ERRORS ====================================
_ ERROR at teardown of TestAllowFiltering.test_update_only_on_transient_replica _
Unexpected error found in node logs (see stdout for full details). Errors: [ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:24:03,193 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-89e40c94 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-7] 2022-01-30 10:24:06,454 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-a0bc8392 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:24:03,193 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-89e40c94 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)]
---------------------------- Captured stdout setup -----------------------------
10:23:34,317 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
10:23:33,14 conftest INFO Starting execution of test_update_only_on_transient_replica at 2022-01-30 10:23:33.014676
10:23:34,224 dtest_setup INFO cluster ccm directory: /tmp/dtest-wd5ikbgc
----------------------------- Captured stdout call -----------------------------

10:23:35,399 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wd5ikbgc/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wd5ikbgc/test/node1/conf'}
10:23:35,400 ccm INFO node1: using Java 8 for the current invocation
10:23:35,579 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wd5ikbgc/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wd5ikbgc/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:23:35,580 ccm INFO node1: using Java 8 for the current invocation
10:23:35,679 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:23:35,964 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wd5ikbgc/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wd5ikbgc/test/node2/conf'}
10:23:35,965 ccm INFO node2: using Java 8 for the current invocation
10:23:36,130 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wd5ikbgc/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wd5ikbgc/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:23:36,130 ccm INFO node2: using Java 8 for the current invocation
10:23:36,215 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
install rule disable mutations

----------------------------- Captured stderr call -----------------------------
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 193, in run
    self.scan_and_report()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 186, in scan_and_report
    on_error_call(errordata)
  File "/root/cassandra-dtest/dtest_setup.py", line 136, in _log_error_handler
    pytest.fail("Error details: \n{message}".format(message=message))
  File "/root/dtest/lib/python3.6/site-packages/_pytest/outcomes.py", line 97, in fail
    raise Failed(msg=msg, pytrace=pytrace)
Failed: Error details: 
Errors seen in logs for: node2
node2: ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:24:03,193 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-89e40c94 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

------------------------------ Captured log call -------------------------------
10:23:35,399 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wd5ikbgc/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wd5ikbgc/test/node1/conf'}
10:23:35,400 ccm INFO node1: using Java 8 for the current invocation
10:23:35,579 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wd5ikbgc/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wd5ikbgc/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:23:35,580 ccm INFO node1: using Java 8 for the current invocation
10:23:35,679 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:23:35,964 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wd5ikbgc/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wd5ikbgc/test/node2/conf'}
10:23:35,965 ccm INFO node2: using Java 8 for the current invocation
10:23:36,130 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-wd5ikbgc/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-wd5ikbgc/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:23:36,130 ccm INFO node2: using Java 8 for the current invocation
10:23:36,215 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:24:01,634 cassandra.cluster INFO New Cassandra host <Host: 127.0.0.2:9042 datacenter1> discovered
---------------------------- Captured log teardown -----------------------------
10:24:07,19 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:24:03,193 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-89e40c94 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===
====================== 1 passed, 1 error in 35.20 seconds ======================
[msx] rc = 1
v1v2 running time = 56534813546
---> v1v2 test failed.
proj: cassandra
u_test: replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
h_list: internode_application_receive_queue_reserve_endpoint_capacity_in_bytes@@@CassandraDaemon@@@-1@@@4096@@@134217728
vv_mode: v1v2
result: FAIL
failureMessage: 
stackTrace: 

cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:25:01,914 conftest ERROR Unexpected error in node1 log, error: 
ERROR [MigrationStage:1] 2022-01-30 10:25:01,120 CassandraDaemon.java:581 - Exception in thread Thread[MigrationStage:1,5,main]
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.OutboundConnection.enqueue(OutboundConnection.java:328)
	at org.apache.cassandra.net.OutboundConnections.enqueue(OutboundConnections.java:84)
	at org.apache.cassandra.net.MessagingService.doSend(MessagingService.java:338)
	at org.apache.cassandra.net.OutboundSink.accept(OutboundSink.java:70)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:327)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:314)
	at org.apache.cassandra.schema.SchemaPullVerbHandler.doVerb(SchemaPullVerbHandler.java:45)
	at org.apache.cassandra.net.InboundSink.lambda$new$0(InboundSink.java:78)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:97)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:45)
	at org.apache.cassandra.net.InboundMessageHandler$ProcessMessage.run(InboundMessageHandler.java:432)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 33.47 seconds ===========================
[msx] rc = 0
v1v1 running time = 54865232891
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 33.07 seconds ===========================
[msx] rc = 0
v2v2 running time = 54530666551
---> v1v1 and v2v2 test test suceeded.
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:26:51,224 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:26:50,284 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-097b4621 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica ERROR [100%]

==================================== ERRORS ====================================
_ ERROR at teardown of TestAllowFiltering.test_update_only_on_transient_replica _
Unexpected error found in node logs (see stdout for full details). Errors: [ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:26:50,284 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-097b4621 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:26:50,284 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-097b4621 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)]
---------------------------- Captured stdout setup -----------------------------
10:26:20,173 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
10:26:18,957 conftest INFO Starting execution of test_update_only_on_transient_replica at 2022-01-30 10:26:18.957801
10:26:20,65 dtest_setup INFO cluster ccm directory: /tmp/dtest-jdla0api
----------------------------- Captured stdout call -----------------------------

10:26:21,328 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-jdla0api/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-jdla0api/test/node1/conf'}
10:26:21,329 ccm INFO node1: using Java 8 for the current invocation
10:26:21,494 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-jdla0api/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-jdla0api/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:26:21,495 ccm INFO node1: using Java 8 for the current invocation
10:26:21,567 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:26:21,828 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-jdla0api/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-jdla0api/test/node2/conf'}
10:26:21,829 ccm INFO node2: using Java 8 for the current invocation
10:26:22,3 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-jdla0api/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-jdla0api/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:26:22,4 ccm INFO node2: using Java 8 for the current invocation
10:26:22,89 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
install rule disable mutations

----------------------------- Captured stderr call -----------------------------
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 193, in run
    self.scan_and_report()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 186, in scan_and_report
    on_error_call(errordata)
  File "/root/cassandra-dtest/dtest_setup.py", line 136, in _log_error_handler
    pytest.fail("Error details: \n{message}".format(message=message))
  File "/root/dtest/lib/python3.6/site-packages/_pytest/outcomes.py", line 97, in fail
    raise Failed(msg=msg, pytrace=pytrace)
Failed: Error details: 
Errors seen in logs for: node2
node2: ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:26:50,284 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-097b4621 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

------------------------------ Captured log call -------------------------------
10:26:21,328 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-jdla0api/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-jdla0api/test/node1/conf'}
10:26:21,329 ccm INFO node1: using Java 8 for the current invocation
10:26:21,494 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-jdla0api/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-jdla0api/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:26:21,495 ccm INFO node1: using Java 8 for the current invocation
10:26:21,567 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:26:21,828 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-jdla0api/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-jdla0api/test/node2/conf'}
10:26:21,829 ccm INFO node2: using Java 8 for the current invocation
10:26:22,3 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-jdla0api/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-jdla0api/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:26:22,4 ccm INFO node2: using Java 8 for the current invocation
10:26:22,89 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:26:45,834 cassandra.cluster INFO New Cassandra host <Host: 127.0.0.2:9042 datacenter1> discovered
---------------------------- Captured log teardown -----------------------------
10:26:51,224 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:26:50,284 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-097b4621 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===
====================== 1 passed, 1 error in 33.43 seconds ======================
[msx] rc = 1
v1v2 running time = 54765200882
---> v1v2 test failed.
proj: cassandra
u_test: replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
h_list: internode_application_receive_queue_reserve_endpoint_capacity_in_bytes@@@CassandraDaemon@@@-1@@@4096@@@134217728
vv_mode: v1v2
result: FAIL
failureMessage: 
stackTrace: 

cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:27:44,208 conftest ERROR Unexpected error in node1 log, error: 
ERROR [MigrationStage:1] 2022-01-30 10:27:42,940 CassandraDaemon.java:581 - Exception in thread Thread[MigrationStage:1,5,main]
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.OutboundConnection.enqueue(OutboundConnection.java:328)
	at org.apache.cassandra.net.OutboundConnections.enqueue(OutboundConnections.java:84)
	at org.apache.cassandra.net.MessagingService.doSend(MessagingService.java:338)
	at org.apache.cassandra.net.OutboundSink.accept(OutboundSink.java:70)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:327)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:314)
	at org.apache.cassandra.schema.SchemaPullVerbHandler.doVerb(SchemaPullVerbHandler.java:45)
	at org.apache.cassandra.net.InboundSink.lambda$new$0(InboundSink.java:78)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:97)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:45)
	at org.apache.cassandra.net.InboundMessageHandler$ProcessMessage.run(InboundMessageHandler.java:432)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 31.67 seconds ===========================
[msx] rc = 0
v1v1 running time = 53005755345
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 34.81 seconds ===========================
[msx] rc = 0
v2v2 running time = 56143830293
---> v1v1 and v2v2 test test suceeded.
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:29:32,738 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:29:31,927 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-d865a095 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica ERROR [100%]

==================================== ERRORS ====================================
_ ERROR at teardown of TestAllowFiltering.test_update_only_on_transient_replica _
Unexpected error found in node logs (see stdout for full details). Errors: [ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:29:31,927 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-d865a095 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:29:31,927 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-d865a095 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)]
---------------------------- Captured stdout setup -----------------------------
10:29:04,153 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
10:29:02,896 conftest INFO Starting execution of test_update_only_on_transient_replica at 2022-01-30 10:29:02.896035
10:29:04,57 dtest_setup INFO cluster ccm directory: /tmp/dtest-q6e6urac
----------------------------- Captured stdout call -----------------------------
10:29:05,132 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-q6e6urac/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-q6e6urac/test/node1/conf'}
10:29:05,133 ccm INFO node1: using Java 8 for the current invocation
10:29:05,305 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-q6e6urac/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-q6e6urac/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:29:05,305 ccm INFO node1: using Java 8 for the current invocation
10:29:05,386 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:29:05,630 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-q6e6urac/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-q6e6urac/test/node2/conf'}
10:29:05,631 ccm INFO node2: using Java 8 for the current invocation
10:29:05,803 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-q6e6urac/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-q6e6urac/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:29:05,804 ccm INFO node2: using Java 8 for the current invocation
10:29:05,886 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
install rule disable mutations

----------------------------- Captured stderr call -----------------------------
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 193, in run
    self.scan_and_report()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 186, in scan_and_report
    on_error_call(errordata)
  File "/root/cassandra-dtest/dtest_setup.py", line 136, in _log_error_handler
    pytest.fail("Error details: \n{message}".format(message=message))
  File "/root/dtest/lib/python3.6/site-packages/_pytest/outcomes.py", line 97, in fail
    raise Failed(msg=msg, pytrace=pytrace)
Failed: Error details: 
Errors seen in logs for: node2
node2: ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:29:31,927 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-d865a095 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

------------------------------ Captured log call -------------------------------
10:29:05,132 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-q6e6urac/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-q6e6urac/test/node1/conf'}
10:29:05,133 ccm INFO node1: using Java 8 for the current invocation
10:29:05,305 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-q6e6urac/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-q6e6urac/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:29:05,305 ccm INFO node1: using Java 8 for the current invocation
10:29:05,386 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:29:05,630 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-q6e6urac/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-q6e6urac/test/node2/conf'}
10:29:05,631 ccm INFO node2: using Java 8 for the current invocation
10:29:05,803 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-q6e6urac/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-q6e6urac/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:29:05,804 ccm INFO node2: using Java 8 for the current invocation
10:29:05,886 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:29:27,692 cassandra.cluster INFO New Cassandra host <Host: 127.0.0.2:9042 datacenter1> discovered
---------------------------- Captured log teardown -----------------------------
10:29:32,738 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:29:31,927 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-d865a095 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===
====================== 1 passed, 1 error in 31.02 seconds ======================
[msx] rc = 1
v1v2 running time = 52375321272
---> v1v2 test failed.
proj: cassandra
u_test: replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
h_list: internode_application_receive_queue_reserve_endpoint_capacity_in_bytes@@@CassandraDaemon@@@-1@@@4096@@@134217728
vv_mode: v1v2
result: FAIL
failureMessage: 
stackTrace: 

cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:30:28,473 conftest ERROR Unexpected error in node1 log, error: 
ERROR [MigrationStage:1] 2022-01-30 10:30:24,065 CassandraDaemon.java:581 - Exception in thread Thread[MigrationStage:1,5,main]
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.OutboundConnection.enqueue(OutboundConnection.java:328)
	at org.apache.cassandra.net.OutboundConnections.enqueue(OutboundConnections.java:84)
	at org.apache.cassandra.net.MessagingService.doSend(MessagingService.java:338)
	at org.apache.cassandra.net.OutboundSink.accept(OutboundSink.java:70)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:327)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:314)
	at org.apache.cassandra.schema.SchemaPullVerbHandler.doVerb(SchemaPullVerbHandler.java:45)
	at org.apache.cassandra.net.InboundSink.lambda$new$0(InboundSink.java:78)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:97)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:45)
	at org.apache.cassandra.net.InboundMessageHandler$ProcessMessage.run(InboundMessageHandler.java:432)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 34.35 seconds ===========================
[msx] rc = 0
v1v1 running time = 55713703002
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 33.51 seconds ===========================
[msx] rc = 0
v2v2 running time = 54951962764
---> v1v1 and v2v2 test test suceeded.
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:32:24,724 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:32:09,110 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-9ea01356 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10665 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica ERROR [100%]

==================================== ERRORS ====================================
_ ERROR at teardown of TestAllowFiltering.test_update_only_on_transient_replica _
Unexpected error found in node logs (see stdout for full details). Errors: [ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:32:09,110 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-9ea01356 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10665 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-6] 2022-01-30 10:32:20,413 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-48c7ffb0 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-8] 2022-01-30 10:32:23,840 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-1e156e61 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 11719 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748), ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:32:09,110 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-9ea01356 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10665 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)]
---------------------------- Captured stdout setup -----------------------------
10:31:47,91 ccm DEBUG Log-watching thread starting.
---------------------------- Captured stderr setup -----------------------------
swapoff: Not superuser.
------------------------------ Captured log setup ------------------------------
10:31:45,992 conftest INFO Starting execution of test_update_only_on_transient_replica at 2022-01-30 10:31:45.992244
10:31:46,994 dtest_setup INFO cluster ccm directory: /tmp/dtest-4l6otkc0
----------------------------- Captured stdout call -----------------------------
10:31:48,219 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-4l6otkc0/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-4l6otkc0/test/node1/conf'}
10:31:48,220 ccm INFO node1: using Java 8 for the current invocation
10:31:48,391 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-4l6otkc0/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-4l6otkc0/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:31:48,392 ccm INFO node1: using Java 8 for the current invocation
10:31:48,470 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:31:48,752 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-4l6otkc0/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-4l6otkc0/test/node2/conf'}
10:31:48,752 ccm INFO node2: using Java 8 for the current invocation
10:31:48,925 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-4l6otkc0/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-4l6otkc0/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:31:48,926 ccm INFO node2: using Java 8 for the current invocation
10:31:49,8 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
install rule disable mutations

----------------------------- Captured stderr call -----------------------------
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python3.6/threading.py", line 916, in _bootstrap_inner
    self.run()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 193, in run
    self.scan_and_report()
  File "/root/dtest/lib/python3.6/site-packages/ccmlib/cluster.py", line 186, in scan_and_report
    on_error_call(errordata)
  File "/root/cassandra-dtest/dtest_setup.py", line 136, in _log_error_handler
    pytest.fail("Error details: \n{message}".format(message=message))
  File "/root/dtest/lib/python3.6/site-packages/_pytest/outcomes.py", line 97, in fail
    raise Failed(msg=msg, pytrace=pytrace)
Failed: Error details: 
Errors seen in logs for: node2
node2: ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:32:09,110 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-9ea01356 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10665 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

------------------------------ Captured log call -------------------------------
10:31:48,219 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-4l6otkc0/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-4l6otkc0/test/node1/conf'}
10:31:48,220 ccm INFO node1: using Java 8 for the current invocation
10:31:48,391 ccm INFO node1: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-4l6otkc0/test/node1/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-4l6otkc0/test/node1/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4'}
10:31:48,392 ccm INFO node1: using Java 8 for the current invocation
10:31:48,470 ccm INFO Starting node1 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:31:48,752 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-4l6otkc0/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-4l6otkc0/test/node2/conf'}
10:31:48,752 ccm INFO node2: using Java 8 for the current invocation
10:31:48,925 ccm INFO node2: current_java_version=8, current_java_home_version=8, jvm_version=None, for_build=False, cassandra_version=4.0.2, install_dir=/root/cassandra, env={'HOSTNAME': '376dbb733093', 'JAVA_HOME': '/usr/lib/jvm/java-1.8.0-openjdk-amd64', 'PWD': '/root/cassandra-dtest', 'HOME': '/root', 'SHLVL': '4', 'ZEBRACONF_HOME': '/root/vm_images/ZebraConf', 'PATH': '/root/dtest/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin', '_': '/root/dtest/bin/pytest', 'OLDPWD': '/', 'PYTEST_CURRENT_TEST': 'replica_side_filtering_test.py::TestAllowFiltering::()::test_update_only_on_transient_replica (call)', 'CASSANDRA_INCLUDE': '/tmp/dtest-4l6otkc0/test/node2/bin/cassandra.in.sh', 'MAX_HEAP_SIZE': '500M', 'HEAP_NEWSIZE': '50M', 'CASSANDRA_HOME': '/root/cassandra', 'CASSANDRA_CONF': '/tmp/dtest-4l6otkc0/test/node2/conf', 'CASSANDRA_LIBJEMALLOC': '-', 'JVM_EXTRA_OPTS': ' -Dcassandra.migration_task_wait_in_seconds=4 -Dcassandra.migration_task_wait_in_seconds=4'}
10:31:48,926 ccm INFO node2: using Java 8 for the current invocation
10:31:49,8 ccm INFO Starting node2 with JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 java_version=8 cassandra_version=4.0.2, install_dir=/root/cassandra
10:32:19,279 cassandra.cluster INFO New Cassandra host <Host: 127.0.0.2:9042 datacenter1> discovered
---------------------------- Captured log teardown -----------------------------
10:32:24,724 conftest ERROR Unexpected error in node2 log, error: 
ERROR [Messaging-EventLoop-3-5] 2022-01-30 10:32:09,110 InboundMessageHandler.java:300 - /127.0.0.1:7000->/127.0.0.2:7000-SMALL_MESSAGES-9ea01356 unexpected exception caught while processing inbound messages; terminating connection
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10665 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.Message$Serializer.inferMessageSize(Message.java:657)
	at org.apache.cassandra.net.InboundMessageHandler.processOneContainedMessage(InboundMessageHandler.java:130)
	at org.apache.cassandra.net.AbstractMessageHandler.processFrameOfContainedMessages(AbstractMessageHandler.java:242)
	at org.apache.cassandra.net.AbstractMessageHandler.processIntactFrame(AbstractMessageHandler.java:227)
	at org.apache.cassandra.net.AbstractMessageHandler.process(AbstractMessageHandler.java:218)
	at org.apache.cassandra.net.FrameDecoder.deliver(FrameDecoder.java:321)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:285)
	at org.apache.cassandra.net.FrameDecoder.channelRead(FrameDecoder.java:269)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)
	at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:795)
	at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:388)
	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:164)
	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:472)
	at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:384)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===
====================== 1 passed, 1 error in 39.92 seconds ======================
[msx] rc = 1
v1v2 running time = 61330855201
---> v1v2 test failed.
proj: cassandra
u_test: replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
h_list: internode_application_receive_queue_reserve_endpoint_capacity_in_bytes@@@CassandraDaemon@@@-1@@@4096@@@134217728
vv_mode: v1v2
result: FAIL
failureMessage: 
stackTrace: 

cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
------------------------------ live log teardown -------------------------------
10:33:22,360 conftest ERROR Unexpected error in node1 log, error: 
ERROR [MigrationStage:1] 2022-01-30 10:33:17,186 CassandraDaemon.java:581 - Exception in thread Thread[MigrationStage:1,5,main]
org.apache.cassandra.net.Message$OversizedMessageException: Message of size 10820 bytes exceeds allowed maximum of 4096 bytes
	at org.apache.cassandra.net.OutboundConnection.enqueue(OutboundConnection.java:328)
	at org.apache.cassandra.net.OutboundConnections.enqueue(OutboundConnections.java:84)
	at org.apache.cassandra.net.MessagingService.doSend(MessagingService.java:338)
	at org.apache.cassandra.net.OutboundSink.accept(OutboundSink.java:70)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:327)
	at org.apache.cassandra.net.MessagingService.send(MessagingService.java:314)
	at org.apache.cassandra.schema.SchemaPullVerbHandler.doVerb(SchemaPullVerbHandler.java:45)
	at org.apache.cassandra.net.InboundSink.lambda$new$0(InboundSink.java:78)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:97)
	at org.apache.cassandra.net.InboundSink.accept(InboundSink.java:45)
	at org.apache.cassandra.net.InboundMessageHandler$ProcessMessage.run(InboundMessageHandler.java:432)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)

===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 36.21 seconds ===========================
[msx] rc = 0
v1v1 running time = 57598657743
cassandra replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica false false
log_dst_dir = /root/vm_images/ZebraConf/app_meta/logs
the_test is replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica
============================= test session starts ==============================
platform linux -- Python 3.6.9, pytest-3.6.4, py-1.11.0, pluggy-0.7.1 -- /root/dtest/bin/python
cachedir: .pytest_cache
rootdir: /root/cassandra-dtest, inifile: pytest.ini
plugins: flaky-3.7.0, timeout-1.4.2, repeat-0.9.1
timeout: 1200.0s
timeout method: signal
timeout func_only: False
collecting ... collected 1 item

replica_side_filtering_test.py::TestAllowFiltering::test_update_only_on_transient_replica PASSED [100%]
===Flaky Test Report===

test_update_only_on_transient_replica passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

========================== 1 passed in 31.01 seconds ===========================
[msx] rc = 0
v2v2 running time = 52445486472
---> v1v1 and v2v2 test test suceeded.
early stop after 7 is satisfied
v1v2 failed with probability 7 out of 7
v1v1v2v2 failed with probability 0 out of 7
Total execution time in seconds : 1162
0
